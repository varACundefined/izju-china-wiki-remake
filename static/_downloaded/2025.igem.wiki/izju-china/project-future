<!doctype html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="shortcut icon" href="https://static.igem.wiki/teams/5913/picture/logo8.webp" />
  <link rel="license" href="https://creativecommons.org/licenses/by/4.0/" />



  <!-- Your site-wide CSS -->
  <link href="static/style.css" rel="stylesheet">
  <link href="static/navbar.css" rel="stylesheet">
  <link href="static/page.css" rel="stylesheet">
  <link href="static/footer.css" rel="stylesheet">
  <link href="static/homepage.css" rel="stylesheet">
  <link href="static/sidebar.css" rel="stylesheet">
  <link href="static/loading.css" rel="stylesheet">

  <!-- Pagefind UI styles (search box styles). Will load from static/pagefind/pagefind-ui.css -->
  <!-- If pagefind directory is not generated yet, this line will 404 but won't affect page functionality; will work after generation -->
  <link rel="stylesheet" href="static/pagefind/pagefind-ui.css">

  <!-- Page-specific additional CSS -->
  
<link rel="stylesheet" href="static/safety-typography.css">


  <!-- Safety-style page CSS -->
  <style>
    /* Safety-only: reduce initial top gap so content shows immediately */
    .pagecontainer {
      margin-top: 4vh;
    }

    .pagecontent {
      transform: none;
      margin-top: 0;
    }

    /* Math formula styles */
    .formula {
      text-align: center;
      margin: 1.5em 0;
      padding: 1em;
      background-color: rgba(0, 0, 0, 0.02);
      border-radius: 8px;
    }

    .formula p {
      margin: 0;
      font-size: 1.1em;
    }

    /* Dark theme formula styles */
    [data-theme="dark"] .formula {
      background-color: rgba(255, 255, 255, 0.05);
    }

    /* MathJax display styles for dark theme */
    [data-theme="dark"] .MathJax,
    [data-theme="dark"] .MathJax_Display {
      color: var(--text-color) !important;
    }



    /* Align Safety background with fixed 250px sidebar on desktop */
    @media (min-width: 921px) {
      .safety-bg-image {
        left: 250px;
        width: calc(100% - 250px);
      }

      /* Override sidebar position to move it to bottom */
      .main .menubg {
        top: 78px !important;
        height: calc(100vh - 78px) !important;
      }
    }

    /* Dark mode table fix */
    [data-theme="dark"] table {
      color: #ecf0f1 !important;
      background-color: transparent !important;
    }

    [data-theme="dark"] table th,
    [data-theme="dark"] table td {
      background-color: rgba(255, 255, 255, 0.05) !important;
      color: #ecf0f1 !important;
      border-color: #4a5568 !important;
    }

    [data-theme="dark"] .pagecontent table {
      color: #ecf0f1 !important;
    }
  </style>

  <!-- Global Back-to-Top Button Styles -->
  <style>
    /* Global Back-to-Top button */
    #global-back-to-top {
      position: fixed;
      right: 12px;
      bottom: 24px;
      width: auto;
      height: auto;
      max-width: 120px;
      max-height: 120px;
      background: none;
      box-shadow: none;
      display: flex;
      align-items: center;
      justify-content: center;
      text-decoration: none;
      opacity: 0;
      pointer-events: none;
      transform: translateY(8px);
      transition: opacity .2s ease, transform .2s ease;
      z-index: 999;
    }

    #global-back-to-top.show {
      opacity: 1;
      pointer-events: auto;
      transform: translateY(0);
    }

    #global-back-to-top:hover {
      transform: translateY(0) scale(1.05);
    }

    #global-back-to-top .global-btt-image {
      width: auto;
      height: auto;
      max-width: 120px;
      max-height: 120px;
      object-fit: contain;
      display: block;
    }

    /* Respect smaller screens: nudge inward and shrink a bit */
    @media (max-width: 768px) {
      #global-back-to-top {
        right: 8px;
        bottom: 16px;
        max-width: 96px;
        max-height: 96px;
      }

      #global-back-to-top .global-btt-image {
        max-width: 96px;
        max-height: 96px;
      }
    }
  </style>

  <title>Future Directions | IZJU-CHINA - iGEM 2025</title>
</head>

<body class="all ">
  <!-- Navigation -->
  <!-- <nav class="navbar navbar-expand-lg navbar-dark bg-dark fixed-top">
  <div class="container">

    TEAM NAME
    <a class="navbar-brand" href="#">IZJU-CHINA</a>

    SMALL SCREEN MENU ICON
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div class="collapse navbar-collapse" id="navbarSupportedContent">
      <ul class="navbar-nav ml-auto left-aligned">

        HOME
        <li class="nav-item">
          <a class="nav-link" href="./">Home</a>
        </li>

        TEAM
        <li class="nav-item dropdown">
          <a class="nav-link dropdown-toggle" href="team" id="navbarDropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
            Team
          </a>
          <ul class="dropdown-menu" aria-labelledby="navbarDropdown">
            <li><a class="dropdown-item" href="team">Team</a></li>
            <li><a class="dropdown-item" href="attributions">Attributions</a></li>
          </ul>
        </li>

        PROJECT
        <li class="nav-item dropdown">
          <a class="nav-link dropdown-toggle" href="#" id="navbarDropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
            Project
          </a>
          <ul class="dropdown-menu" aria-labelledby="navbarDropdown">
            <li><a class="dropdown-item" href="contribution">Contribution</a></li>
            <li><a class="dropdown-item" href="description">Description</a></li>
            <li><a class="dropdown-item" href="engineering">Engineering</a></li>
            <li><a class="dropdown-item" href="experiments">Experiments</a></li>
            <li><a class="dropdown-item" href="notebook">Notebook</a></li>
            <li><a class="dropdown-item" href="results">Results</a></li>
          </ul>
        </li>

        SAFETY
        <li class="nav-item">
          <a class="nav-link" href="safety">Safety</a>
        </li>

        HUMAN PRACTICES
        <li class="nav-item">
          <a class="nav-link" href="human-practices">Human Practices</a>
        </li>

        AWARDS
        <li class="nav-item dropdown">
          <a class="nav-link dropdown-toggle" href="#" id="navbarDropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
            Awards
          </a>
          <ul class="dropdown-menu" aria-labelledby="navbarDropdown">
            <li><a class="dropdown-item" href="education">Education</a></li>
            <li><a class="dropdown-item" href="entrepreneurship">Entrepreneurship</a></li>
            <li><a class="dropdown-item" href="hardware">Hardware</a></li>
            <li><a class="dropdown-item" href="inclusivity">Inclusivity</a></li>
            <li><a class="dropdown-item" href="measurement">Measurement</a></li>
            <li><a class="dropdown-item" href="model">Model</a></li>
            <li><a class="dropdown-item" href="plant">Plant</a></li>
            <li><a class="dropdown-item" href="software">Software</a></li>
            <li><a class="dropdown-item" href="sustainable">Sustainable</a></li>
          </ul>
        </li>

      </ul>
    </div>
  </div>
</nav> -->

<nav class="my-nav" id="navbox">
  <div class="logo-container">
    <a href="./" class="icon" aria-label="Home"></a>
  </div>

  <ul class="my-navbar" id="my-navbar">
    <!-- 1) Light/dark toggle button: first one -->
    <li class="aux theme-li">
      <div class="color-picker" id="theme-picker">
        <a class="color-button" href="#" id="theme-toggle" aria-label="Toggle dark mode">
          <span class="iconfont icon-bulb">üåì</span>
        </a>
        <div class="color-picker-menu" id="theme-menu" style="display: none;">
          <div class="mode-options">
            <h4 class="title">Choose mode</h4>
            <ul class="color-mode-options">
              <li class="dark" data-mode="dark">dark</li>
              <li class="light" data-mode="light">light</li>
              <li class="auto active" data-mode="auto">auto</li>
            </ul>
          </div>
        </div>
      </div>
    </li>

    <!-- 2) Search: second one -->
    <li class="aux search-li">
      <div class="search-box">
        <span class="iconfont icon-search">üîç</span>
        <input id="search-input" type="text" placeholder="Search the wiki" autocomplete="off" spellcheck="false">
        <ul class="suggestions" id="search-suggestions" style="display: none;"></ul>
      </div>
    </li>

    <!-- 3) Other menus (keep original hover expansion logic) -->
    <li onmouseover="over(this)" onmouseleave="leave(this)">
      <a href="./">Home</a>
    </li>

    <li onmouseover="over(this)" onmouseleave="leave(this)">
      <a href="#" style="cursor:default;">Project</a>
      <ul class="son" onmouseover="over(this.parentElement)" onmouseleave="leave(this.parentElement)">
        <li><a href="background">Background</a></li>
        <li><a href="description">Description</a></li>
        <li><a href="engineering">Engineering</a></li>
        <li><a href="contribution">Contribution</a></li>
        <li><a href="implementation">Implementation</a></li>
        <li><a href="project-future" data-search-title="Project Future">Future</a></li>
      </ul>
    </li>

    <li onmouseover="over(this)" onmouseleave="leave(this)">
      <a href="#" style="cursor:default;">Dry Lab</a>
      <ul class="son" onmouseover="over(this.parentElement)" onmouseleave="leave(this.parentElement)">
        <li><a href="design">Design</a></li>
        <li><a href="model">Model</a></li>
      </ul>
    </li>

    <li onmouseover="over(this)" onmouseleave="leave(this)">
      <a href="#" style="cursor:default;">Wet Lab</a>
      <ul class="son" onmouseover="over(this.parentElement)" onmouseleave="leave(this.parentElement)">
        <li><a href="wetlab-overview">Overview</a></li>
        <li><a href="gene-cleavage">Gene Cleavage</a></li>
        <li><a href="assembly">Assembly</a></li>
        <li><a href="validation">Validation</a></li>
        <li><a href="wetlab-future" data-search-title="Wetlab Future">Future</a></li>
        <li><a href="parts">Part</a></li>
      </ul>
    </li>

    <li onmouseover="over(this)" onmouseleave="leave(this)">
      <a href="#" style="cursor:default;">Human Practice</a>
      <ul class="son" onmouseover="over(this.parentElement)" onmouseleave="leave(this.parentElement)">
        <li><a href="human-practices">iHP</a></li>
        <li><a href="entrepreneurship">Entrepreneurship</a></li>
        <li><a href="collaborations">Collaboration</a></li>
        <li><a href="safety">Safety</a></li>
      </ul>
    </li>

    <li onmouseover="over(this)" onmouseleave="leave(this)">
      <a href="#" style="cursor:default;">Team</a>
      <ul class="son" onmouseover="over(this.parentElement)" onmouseleave="leave(this.parentElement)">
        <li><a href="roster">Roster</a></li>
        <li><a href="attributions">Attribution</a></li>
        <li><a href="awards">Awards</a></li>
      </ul>
    </li>

  </ul>
</nav>

<script>
  // Navbar control variables
  const navbox = document.getElementById("navbox");
  const navbar = document.getElementById("my-navbar");
  const items = navbar ? navbar.children : [];

  // Debounce variables
  let hoverTimeout;
  let leaveTimeout;
  let currentHoverItem = null;

  function setAllColor() {
    for (let i = 0; i < items.length; i++) {
      const a = items[i].querySelector(':scope > a');
      if (a) a.style.color = ''; // Clear inline styles, let CSS variables take effect
    }
  }

  function hideAllMenus() {
    // Restore all menu item colors
    setAllColor();

    // Hide all submenus
    const allSons = document.querySelectorAll('.son');
    allSons.forEach(son => {
      son.style.opacity = 0;
      son.style.display = "none";
    });

    // Restore navbar height
    navbox.style.height = "78px";

    currentHoverItem = null;
  }

  function over(el) {
    // Clear previous timer
    if (hoverTimeout) clearTimeout(hoverTimeout);
    if (leaveTimeout) clearTimeout(leaveTimeout);


    if (currentHoverItem && currentHoverItem !== el) {
      hideAllMenus();
    }


    currentHoverItem = el;


    setAllColor();

    //  - CSS
    const a = el.querySelector(':scope > a');
    if (a) a.style.color = 'var(--nav-link-hover)';


    const son = el.querySelector(':scope > .son');
    if (son) {
      son.style.display = "block";

      son.style.opacity = 1;


      if (document.documentElement.clientWidth > 1400) {
        navbox.style.height = "180px";  // 320px180px
      } else if (document.documentElement.clientHeight < 1120) {
        navbox.style.height = "150px";  // 245px150px
      } else {
        navbox.style.height = "160px";  // 280px160px
      }
    }
  }

  function leave(el) {

    if (hoverTimeout) clearTimeout(hoverTimeout);
    if (leaveTimeout) clearTimeout(leaveTimeout);


    if (currentHoverItem === el) {
      leaveTimeout = setTimeout(() => {
        hideAllMenus();
      }, 150); // 150ms
    }
  }


  navbox.addEventListener('mouseleave', function () {

    leaveTimeout = setTimeout(() => {
      hideAllMenus();
    }, 150);
  });


  navbox.addEventListener('mouseenter', function () {
    if (leaveTimeout) {
      clearTimeout(leaveTimeout);
      leaveTimeout = null;
    }
  });
</script>

  <!-- Page Content -->
  <div class="main">
    <div class="menubg">
      <div id="menu">
        <!-- Sidebar content will be dynamically generated by page-specific JavaScript -->
      </div>
    </div>
    <div id="content">
      <!-- Safety-style page structure -->
      <div class="safety-bg-image">
        <div class="subpage-bg-shelter"></div>
      </div>
      <div class="pagecontainer">
        <div class="title2">
          <span>Future Directions</span>
        </div>
        <div class="pagebody">
          <div class="pagecontent" id="auto-page-content">
            
<div id="auto-future-content">
  <div class="project-future-content">
  <p><strong>PART1: Biotechnological mass production</strong></p>

  <p>DNA origami is a nanostructure assembled from a very long single-stranded scaffold molecule, which is held in place by many short staple oligonucleotides. Bacteriophage-derived scaffold molecules can be feasibly produced at scale, while the shorter staple strands are typically obtained through costly solid-phase synthesis or enzymatic processes (1). Fortunately, an innovative method for the phage-free production of short single-strand DNA staples using <em>E. coli</em> has been developed in recent years. This enables the biotechnological production of complete DNA origami without cross-contamination. To assess the affordability of our therapeutic for the general population, we plan to partner with the research and development division of a local pharmaceutical factory to construct a test model.</p>

  <p><strong>Design Criterion</strong></p>

  <p>The engineered <em>E. coli</em> system consists of an artificial phagemid and a helper plasmid. The former contains the crucial regulatory sequences required to initiate rolling circle amplification‚Äîa specific amplification pattern derived from phages that produces long single-strand DNA‚Äîbut it lacks the genes for capsid proteins. The latter incorporates both the phage backbone and a regular plasmid backbone, enabling the continuous production of the main capsid protein but not the initiation of rolling circle amplification. This design prevents the phages from self-replicating, thereby eliminating the risk of engineered phage residues being released into the environment. Simultaneously, the separation and controllability of these components enhance production efficiency.</p>

  <figure style="text-align: center; margin: 30px 0;">
    <img src="https://static.igem.wiki/teams/5913/future/future-1.webp" alt="Phagemid and helper plasmid design" style="max-width: 100%; height: auto;">
    <figcaption>Figure 1. An example of phagemid and helper plasmid with crucial components, taken from reference (2)</figcaption>
  </figure>

  <p><strong>Detailed Plasmid Design Concept</strong></p>

  <p>In our design, the crucial sequence for initiating rolling circle amplification‚ÄîF1-ori (2)‚Äîis regulated by a promoter that is only active when stimulated by specific substances. Otherwise, the engineered bacteria will maintain normal double-strand DNA replication to accumulate capsid proteins and DNA material until a critical density is reached.</p>

  <p>The plasmid's main component is an artificial pseudogene, into which all target staple sequences (including m13) are interleaved with self-cleaving catalytic DNAzymes. Each DNAzyme is approximately 70 base pairs long. Due to time constraints, we use one type of staples (F-cap-x) as an example and design its corresponding pseudogene sequence.</p>

  <figure style="text-align: center; margin: 30px 0;">
    <img src="https://static.igem.wiki/teams/5913/future/future-2.webp" alt="Design criteria illustration" style="max-width: 100%; height: auto;">
    <figcaption>Figure 2. Illustration of the design criteria and effect of user-defined sequences, which will be cleaved into scaffold and staples of DNA origami. Figure taken from reference (1).</figcaption>
  </figure>

  <p><strong>The sequences</strong></p>
  <p><a href="https://static.igem.wiki/teams/5913/future/future-1.pdf" target="_blank">View sequence details (PDF)</a></p>

  <p><strong>Industrial Flow chart</strong></p>

  <figure style="text-align: center; margin: 30px 0;">
    <img src="https://static.igem.wiki/teams/5913/future/future-3.webp" alt="Industrial production flowchart" style="max-width: 100%; height: auto;">
    <figcaption>Figure 3. Illustration of the procedure for biologically producing DNA origami. Engineered <em>E. coli</em> is first cultured until bacterial accumulation reaches a critical density. If not, cultivation continues; if yes, a signaling substance is added to initiate rolling circle amplification so that phages unable to replicate themselves are produced. Then, phages are collected and subjected to DNA purification. After adding Zn¬≤‚Å∫ to facilitate DNA self-excision to obtain scaffold and staple strands, a PCR program is run to construct the DNA origami, which is then stored before transported applying to the patients.</figcaption>
  </figure>

  <p><strong>Rough Calculation of Production Costs</strong></p>

  <p>With biotechnological mass production, the cost is estimated to be approximately ‚Ç¨0.18 per milligram of folded DNA origami in an 800-liter volume at a contract biotech facility. This is at least three orders of magnitude cheaper than the estimated cost of producing the same amount via conventional solid-phase chemical oligonucleotide synthesis. Furthermore, costs decrease with an expansion of the production scale (1).</p>

  <figure style="text-align: center; margin: 30px 0;">
    <img src="https://static.igem.wiki/teams/5913/future/future-4.webp" alt="Cost breakdown" style="max-width: 100%; height: auto;">
    <figcaption>Figure 4. Cost breakdown for DNA origami nanorod production at lab scale and pilot scale, adapted from reference (1)</figcaption>
  </figure>

  <p><strong>PART 2: Expansion of Implementation Scenarios</strong></p>

  <p><strong>From Wound to Respiratory and Intracranial Infections</strong></p>

  <p>In our initial design, the drug delivery system is encapsulated within a hydrogel and applied to or sprayed on skin wounds infected by Methicillin-resistant <em>Staphylococcus aureus</em> (MRSA), a common occurrence in hospital ICUs where patients are frequently exposed to antimicrobial-resistant bacteria. However, the delivery strategy must be expanded to address more severe and advanced-stage infections, such as those in the respiratory tract and intracranial region (3). Our therapeutic, Focas, is an efficient and biocompatible platform that can be readily adapted to other delivery methods to treat a broader range of diseases. Here, we present a conceptual framework for future designs in these two areas, based on existing research.</p>

  <p><strong>Respiratory Infections</strong></p>

  <p>MRSA respiratory infections can cause life-threatening diseases, including pneumonia, empyema, and respiratory failure. Conventional oral and parenteral antibiotic treatments are often inefficient at targeting the lower respiratory tract and can cause systemic adverse effects (4). In contrast, nebulized inhalation is considered an optimal method for lung disease treatment due to the long drug retention time in the lungs, improved delivery of hydrophobic drugs, and reduced systemic toxicity. Specifically, nebulized samples are administered as 10‚Äì50 Œºm microdroplets via a nebulizer. Focas possesses the characteristics of nanomedicines that are likely to pass through the airways and cross the mucus barrier. Previous studies have shown that DNA origami-based drugs can successfully diffuse into deeper regions and remain stable. We plan to conduct experiments to validate our design. The potential crucial role of peptide modification in the treatment requires further evidence (5).</p>

  <figure style="text-align: center; margin: 30px 0;">
    <img src="https://static.igem.wiki/teams/5913/future/future-5.webp" alt="Nebulized drug delivery" style="max-width: 100%; height: auto;">
    <figcaption>Figure 5. Schematic diagram of nebulized drug delivery of Focas in new implementation scenarios.</figcaption>
  </figure>

  <p><strong>Intracranial Infections</strong></p>

  <p>Bacterial meningitis is a severe infection associated with a high mortality risk. A study in Ontario, Canada, showed that <em>Staphylococcus aureus</em> was the second most common pathogen in community-acquired meningitis and the most common pathogen in nosocomial meningitis (6). The ability of bacteria to cross the blood-brain barrier (BBB) and proliferate slowly in the subarachnoid space presents a significant treatment challenge (7). Our adjusted Focas platform functions as a composite delivery vesicle designed to transport CRISPR-Cas9 together with traditional antimicrobial small molecules across the blood-brain barrier. This system is designed to simultaneously kill bacteria and prevent the spread of antimicrobial resistance genes. The barrel structure of Focas has been shown to cross the BBB via transcytosis more efficiently than smaller, rigid structures. In the next phase, we will modify the scaffold into a soccer ball configuration, which offers greater flexibility and deformability, and test its transport efficiency (8).</p>

  <figure style="text-align: center; margin: 30px 0;">
    <img src="https://static.igem.wiki/teams/5913/future/future-6.webp" alt="DNA origami morphologies" style="max-width: 100%; height: auto;">
    <figcaption>Figure 6. Different origami morphologies and their transport efficiency through BBB, figure taken from reference (8).</figcaption>
  </figure>

  <p><strong>PART 3: Stability Enhancement</strong></p>

  <p>Although our wet lab experiments indicate that Focas can maintain its structure for a few hours in PBS and a few days when stored at 4¬∞C. However, the therapeutic must remain stable long enough to be effective in a more complex body environment when delivered through vascular system or pulmonary mucosa. Moreover, DNA origami material should be able to store for much longer time in practical implementation. Therefore, our future plan is to enhance stability of Focas by analyzing both exogenous and endogenous factors.</p>

  <p><strong>Exogenous Reasons and Enhancement Plan</strong></p>

  <p>In the complex wound microenvironment, the degradation of free DNase enzymes and lysosomal in host cells like phagocytes poses a threat to the stability of the entire biomaterial delivery platform. A potential solution involves using a bio-reducible, cationic polymer‚Äîpoly(cystaminebisacrylamide-1,6-diaminohexane) (PCD)‚Äîas a reversible protective capsule for the DNA origami. Previous studies have demonstrated PCD's protective effect against low salt conditions and DNase I degradation. Interestingly, it may also enhance target combination (9). We will test the stability of Focas encapsulated with PCD in a modeled wound microenvironment and concurrently collect data on changes to aptamer targeting efficiency.</p>

  <p><strong>Endogenous Reasons and Enhancement Plan</strong></p>

  <p>The membrane rupture component of Focas is G4-hemin, which generates reactive oxidative species (ROS) to disrupt the bacterial outer membrane and facilitate drug internalization. Although our wet lab shows Focas can withstand attack from ROS in experiment time, we still doubt it causing unnecessary injury on DNA origami structure in a longer time period. To replace this critical membrane transport component, we have identified potential in targeting cell surface thiols to enhance cellular uptake. Related strategies involving disulfide conjugation to nanoparticles, oligonucleotides, and even DNA origami have been proven as an efficient and rapid strategy with no associated toxicity (10-12). However, direct evidence in prokaryotes is lacking due to limited research. We plan to collaborate with laboratories specializing in prokaryotic transmembrane drug delivery to test the feasibility of this new method. If the results are positive, we will replace the G4-hemin component with staples modified with disulfide units on the 3' terminus and conduct subsequent confirmatory experiments.</p>

  <figure style="text-align: center; margin: 30px 0;">
    <img src="https://static.igem.wiki/teams/5913/future/future-7.webp" alt="Staples modified with disulfide units" style="max-width: 100%; height: auto;">
    <figcaption>Figure 7. Staples modified with disulfide units to enhance cellular uptake, taking SiRNA drug as an example, taken from reference (11).</figcaption>
  </figure>

  <p><strong>Remaining Problems and Future Prospects</strong></p>

  <p>As a versatile bacterial-killing platform, Focas still holds great potential for future iGEM teams to optimize. For instance, the lock-staples containing chemically synthesized disulfide bonds present a barrier to mass production due to their high cost. Is there a biological alternative to produce this type of specialized staple, or another mechanism for CRISPR cellular escape in prokaryotes? Furthermore, a standardized model for loading traditional antibiotic molecules onto Focas needs to be established to simultaneously kill bacteria and prevent the spread of drug resistance genes.</p>

  <p>In summary, although Focas still has a long development path ahead before clinical implementation, we believe it represents the beginning of a major advancement. We are confident in pioneering a standardized, quantitative, and universal biopharmaceutical platform targeting drug-resistant bacteria, and we hope to provide a foundation for future iGEM teams to build upon.</p>

  <p><strong>References</strong></p>

  <ol class="references">
    <li>Praetorius F, Kick B, Behler KL, Honemann MN, Weuster-Botz D, Dietz H. Biotechnological mass production of DNA origami. Nature [Internet]. 2017 Dec [cited 2025 Sept 11];552(7683):84‚Äì7. Available from: https://www.nature.com/articles/nature24650</li>
    
    <li>Behler KL, Honemann MN, Silva-Santos AR, Dietz H, Weuster-Botz D. Phage-free production of artificial ssDNA with Escherichia coli. Biotechnology and Bioengineering [Internet]. 2022 [cited 2025 Sept 11];119(10):2878‚Äì89. Available from: https://onlinelibrary.wiley.com/doi/abs/10.1002/bit.28171</li>
    
    <li>Nandhini P, Kumar P, Mickymaray S, Alothaim AS, Somasundaram J, Rajan M. Recent Developments in Methicillin-Resistant Staphylococcus aureus (MRSA) Treatment: A Review. Antibiotics (Basel) [Internet]. 2022 Apr 29 [cited 2025 Sept 12];11(5):606. Available from: https://www.ncbi.nlm.nih.gov/pmc/articles/PMC9137690/</li>
    
    <li>Kwong PTH, Arnold JC, Chan HK, Kwok PCL. Co-spray drying of cannabidiol and vancomycin combination powder formulations for the treatment of methicillin-resistant Staphylococcus aureus respiratory infections International Journal of Pharmaceutics [Internet]. 2025 Oct 15 [cited 2025 Sept 11];683:126063. Available from: https://www.sciencedirect.com/science/article/pii/S0378517325009007</li>
    
    <li>Wang H, Jiao Y, Ma S, Li Z, Gong J, Jiang Q, et al. Nebulized Inhalation of Peptide-Modified DNA Origami To Alleviate Acute Lung Injury. Nano Lett [Internet]. 2024 May 22 [cited 2025 Sept 11];24(20):6102‚Äì11. Available from: https://doi.org/10.1021/acs.nanolett.4c01222</li>
    
    <li>Bai AD, Boyd JG, Li W, Campbell RJ, Gill SS. Microbiology and long-term outcomes in community-acquired, nosocomial and post-neurosurgical meningitis with positive bacterial culture in Ontario, Canada: A population-based cohort study International Journal of Infectious Diseases [Internet]. 2025 Aug 1 [cited 2025 Sept 12];157:107925. Available from: https://www.sciencedirect.com/science/article/pii/S1201971225001493</li>
    
    <li>Sharma H, Narayanan KB, Ghosh S, Singh KK, Rehan P, Amist AD, et al. Nanotherapeutics for Meningitis: Enhancing Drug Delivery Across the Blood-Brain Barrier. Biomimetics (Basel) [Internet]. 2025 Jan 3 [cited 2025 Sept 12];10(1):25. Available from: https://www.ncbi.nlm.nih.gov/pmc/articles/PMC11762342/</li>
    
    <li>Chen X, Liu D, Wu Y, Yao H, Xia Q, Yang Y. Investigation of the Transporting Behavior of Framework DNA Nano-Devices Across the Artificial Blood-Brain Barrier (BBB). ChemBioChem [Internet]. 2022 [cited 2025 Sept 12];23(21):e202200459. Available from: https://onlinelibrary.wiley.com/doi/abs/10.1002/cbic.202200459</li>
    
    <li>Youssef S, Tsang E, Samanta A, Kumar V, Gothelf KV. Reversible Protection and Targeted Delivery of DNA Origami with a Disulfide-Containing Cationic Polymer. Small [Internet]. 2024 [cited 2025 Sept 13];20(10):2301058. Available from: https://onlinelibrary.wiley.com/doi/abs/10.1002/smll.202301058</li>
    
    <li>Torres AG, Gait MJ. Exploiting cell surface thiols to enhance cellular uptake Trends in Biotechnology [Internet]. 2012 Apr 1 [cited 2025 Sept 13];30(4):185‚Äì90. Available from: https://www.sciencedirect.com/science/article/pii/S016777991100206X</li>
    
    <li>Shu Z, Tanaka I, Ota A, Fushihara D, Abe N, Kawaguchi S, et al. Disulfide-Unit Conjugation Enables Ultrafast Cytosolic Internalization of Antisense DNA and siRNA. Angewandte Chemie International Edition [Internet]. 2019 [cited 2025 Sept 12];58(20):6611‚Äì5. Available from: https://onlinelibrary.wiley.com/doi/abs/10.1002/anie.201900993</li>
    
    <li>Yu L, Xu Y, Al-Amin M, Jiang S, Sample M, Prasad A, et al. CytoDirect: A Nucleic Acid Nanodevice for Specific and Efficient Delivery of Functional Payloads to the Cytoplasm. J Am Chem Soc [Internet]. 2023 Dec 20 [cited 2025 Sept 12];145(50):27336‚Äì47. Available from: https://www.ncbi.nlm.nih.gov/pmc/articles/PMC10789493/</li>
  </ol>
</div>
</div>

          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Footer -->
  <!-- <footer class="pt-5 pb-5 footer py-5 mt-5 bg-dark text-white">
  <div class="container">
    <div class="row mb-4">
      <div class="col-lg-6 col-xs-12">
        <h4 class="mb-3">Heading</h4>
        <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nullam ac ante mollis quam tristique convallis</p>
      </div>
      <div class="col-lg-3 col-xs-12">
        <h4 class="mt-lg-0 mt-sm-3">Links</h4>
          <ul class="m-2 p-2">
            <li><a href="#">Lorem ipsum</a></li>
            <li><a href="#">Nam mauris velit</a></li>
            <li><a href="#">Etiam vitae mauris</a></li>
            <li><a href="#">Fusce scelerisque</a></li>
            <li><a href="#">Sed faucibus</a></li>
            <li><a href="#">Mauris efficitur nulla</a></li>
          </ul>
      </div>
      <div class="col-lg-3 col-xs-12">
        <h4 class="mt-lg-0 mt-sm-4 mb-3">Contact</h4>
        <p>22, Lorem ipsum dolor, consectetur adipiscing</p>
        <p class="mb-0">(541) 754-3010</p>
        <p>info@hsdf.com</p>
      </div>
    </div>
    <hr>
    The following MUST be on every page: license information and link to the repository on gitlab.igem.org
    <div class="row mt-4">
      <div class="col" style="text-align:center;">
        <p class="mb-0"><small> 2025 - Content on this site is licensed under a <a class="subfoot" href="https://creativecommons.org/licenses/by/4.0/" rel="license">Creative Commons Attribution 4.0 International license</a>.</small></p>
	      <p><small>The repository used to create this website is available at <a href="https://gitlab.igem.org/2025/izju-china">gitlab.igem.org/2025/izju-china</a>.</small></p>
      </div>
    </div>
  </div>
</footer> -->

<footer class="my-footer-container">
  <div class="my-footer">
    <div class="footer-navigation">
      <!-- Single row with all five main categories -->
      <div class="footer-row">
        <div class="footer-navbars">
          <div class="footer-navbar-title"><span>Project</span></div>
          <div class="footer-navbar-contents"><a href="background">Background</a></div>
          <div class="footer-navbar-contents"><a href="description">Description</a></div>
          <div class="footer-navbar-contents"><a href="engineering">Engineering</a></div>
          <div class="footer-navbar-contents"><a href="contribution">Contribution</a>
          </div>
          <div class="footer-navbar-contents"><a href="implementation">Implementation</a>
          </div>
          <div class="footer-navbar-contents"><a href="project-future">Future</a></div>
        </div>
        <div class="footer-navbars">
          <div class="footer-navbar-title"><span>Dry Lab</span></div>
          <div class="footer-navbar-contents"><a href="design">Design</a></div>
          <div class="footer-navbar-contents"><a href="model">Model</a></div>
        </div>
        <div class="footer-navbars">
          <div class="footer-navbar-title"><span>Wet Lab</span></div>
          <div class="footer-navbar-contents"><a href="wetlab-overview">Overview</a>
          </div>
          <div class="footer-navbar-contents"><a href="gene-cleavage">Gene Cleavage</a>
          </div>
          <div class="footer-navbar-contents"><a href="assembly">Assembly</a></div>
          <div class="footer-navbar-contents"><a href="validation">Validation</a></div>
          <div class="footer-navbar-contents"><a href="wetlab-future">Future</a></div>
          <div class="footer-navbar-contents"><a href="parts">Part</a></div>
        </div>
        <div class="footer-navbars">
          <div class="footer-navbar-title"><span>Human Practice</span></div>
          <div class="footer-navbar-contents"><a href="human-practices">iHP</a></div>
          <div class="footer-navbar-contents"><a
              href="entrepreneurship">Entrepreneurship</a></div>
          <div class="footer-navbar-contents"><a href="collaborations">Collaboration</a>
          </div>
          <div class="footer-navbar-contents"><a href="safety">Safety</a></div>
        </div>
        <div class="footer-navbars">
          <div class="footer-navbar-title"><span>Team</span></div>
          <div class="footer-navbar-contents"><a href="roster">Roster</a></div>
          <div class="footer-navbar-contents"><a href="attributions">Attribution</a>
          </div>
          <div class="footer-navbar-contents"><a href="awards">Awards</a></div>
        </div>
      </div>
    </div>
    <div class="footer-logos">
      <img src="https://static.igem.wiki/teams/5913/picture/logo6.webp" alt="IZJU-CHINA Logo">
    </div>
    <div class="footer-infos">
      <p><small>¬© 2025 - Content on this site is licensed under a <a href="https://creativecommons.org/licenses/by/4.0/"
            rel="license">Creative Commons Attribution 4.0 International license</a>.</small></p>
      <p><small>The repository used to create this website is available at <a
            href="https://gitlab.igem.org/2025/izju-china">gitlab.igem.org/2025/izju-china</a>.</small></p>
    </div>
  </div>
</footer>

  <!-- Global Back-to-Top Button -->
  <a id="global-back-to-top" href="#" aria-label="Back to top" title="Back to top">
    <img src="https://static.igem.wiki/teams/5913/picture/uptotop.webp" alt="Back to top" class="global-btt-image">
  </a>

  <!-- ScrollReveal -->
  <script src="static/scrollreveal.js"></script>

  <!-- MathJax Configuration and Loading -->
  <script type="text/javascript">
    window.MathJax = {
      tex2jax: {
        inlineMath: [['$', '$'], ['\\(', '\\)']],
        displayMath: [['$$', '$$'], ['\\[', '\\]']],
        processEscapes: true,
        processEnvironments: true,
        skipTags: ['script', 'noscript', 'style', 'textarea', 'pre']
      },
      displayAlign: 'center',
      "HTML-CSS": {
        styles: { '.MathJax_Display': { margin: '1em 0' } },
        linebreaks: { automatic: true }
      }
    };
  </script>
  <script type="text/javascript" async
    src="static/MathJax-2.7.7/MathJax.js?config=TeX-MML-AM_HTMLorMML"></script>

  <!-- Dark mode script: place after menu.html to bind #theme-toggle click event -->
  <script src="static/theme.js?v=2"></script>
  <!-- Unified sidebar logic/icons -->
  <script src="static/sidebar-common.js?v=1"></script>

  <!-- Search functionality script -->
  <script src="static/search.js"></script>

  <!-- Loading page script -->
  <script src="static/loading.js?v=3"></script>

  <!-- Optional: make navigation background more solid when scrolling down -->
  <script>
    window.addEventListener('scroll', () => {
      const nav = document.querySelector('.my-nav');
      if (!nav) return;
      nav.classList.toggle('scrolled', window.scrollY > 10);
    });
  </script>



  <!-- Global Back-to-Top Button Functionality -->
  <script>
    // Global Back-to-Top button behavior
    document.addEventListener('DOMContentLoaded', function () {
      try {
        var btt = document.getElementById('global-back-to-top');
        if (btt) {
          var toggleBtt = function () {
            var shouldShow = (window.pageYOffset || document.documentElement.scrollTop) > 300;
            if (shouldShow) {
              btt.classList.add('show');
            } else {
              btt.classList.remove('show');
            }
          };
          window.addEventListener('scroll', toggleBtt, { passive: true });
          window.addEventListener('load', toggleBtt);
          btt.addEventListener('click', function (ev) {
            ev.preventDefault();
            window.scrollTo({ top: 0, behavior: 'smooth' });
          });
        }
      } catch (e) {
        console.warn('Global back-to-top button initialization failed:', e);
      }
    });
  </script>

  <!-- Sidebar functionality -->
  <script>
    // Sidebar menu functionality
    function bind(tagStr, eventStr, func) {
      let el = document.querySelectorAll(tagStr);
      el.forEach((item) => item.addEventListener(eventStr, func))
    }

    // Smooth scroll to element and place it in upper-middle area of viewport
    function smoothScrollToElement(targetElement, offsetRatio = 0.3) {
      if (!targetElement) return;

      // Get navbar height
      const nav = document.querySelector('.my-nav');
      const navHeight = nav ? nav.getBoundingClientRect().height : 0;


      const viewportHeight = window.innerHeight || document.documentElement.clientHeight || 800;


      const desiredOffsetFromTop = Math.floor(viewportHeight * offsetRatio) + navHeight;


      const targetRect = targetElement.getBoundingClientRect();
      const targetTop = targetRect.top + window.pageYOffset;


      const scrollToPosition = Math.max(0, targetTop - desiredOffsetFromTop);

      console.log('Scroll calculation:', {
        targetTop,
        navHeight,
        viewportHeight,
        desiredOffsetFromTop,
        scrollToPosition,
        currentScroll: window.pageYOffset
      });

      window.scrollTo({
        top: scrollToPosition,
        behavior: 'smooth'
      });
    }

    function stickyMenu() {

      function adjustSidebarDimensions() {
        const menu = document.getElementById('menu');
        const menubg = document.querySelector('.menubg');
        const content = document.getElementById('content');
        const footer = document.querySelector('.my-footer-container');

        if (menu && menubg && content) {

          if (document.body.classList.contains('no-sidebar')) {
            menubg.style.display = 'none';
            menubg.style.position = 'relative';
            content.style.marginLeft = '0px';
            content.style.width = '100%';
            if (footer) {
              footer.style.marginLeft = '0px';
              footer.style.width = '100%';
            }
            return;
          }

          const isMobile = window.innerWidth <= 920;

          if (isMobile) {

            menubg.style.display = 'none';
            menubg.style.position = 'relative';
            content.style.marginLeft = '0px';
            content.style.width = '100%';

            if (footer) {
              footer.style.marginLeft = '0px';
              footer.style.width = '100%';
            }
          } else {

            menubg.style.display = 'block';
            menubg.style.position = 'fixed';
            menubg.style.top = '0';
            menubg.style.left = '0';
            menubg.style.width = '250px';
            menubg.style.height = '100vh';
            content.style.marginLeft = '250px';
            content.style.width = 'calc(100% - 250px)';

            if (footer) {
              footer.style.marginLeft = '250px';
              footer.style.width = 'calc(100% - 250px)';
            }
          }
        }
      }


      adjustSidebarDimensions();


      window.addEventListener('resize', adjustSidebarDimensions);
    }

    let cb_t1 = function (e) {

      let t1 = [...document.querySelectorAll("#menu .t1")];
      t1.forEach((item) => item.classList.remove("unfold"));
      e.currentTarget.classList.add("unfold");


      const targetId = e.currentTarget.getAttribute("tid");
      const targetElement = document.getElementById(targetId);
      if (targetElement) smoothScrollToElement(targetElement, 0.3);


      window.userManualNavigation = true;
      setTimeout(() => {
        window.userManualNavigation = false;
      }, 800);
    }

    let cb_t2 = function (e) {

      const targetId = e.currentTarget.getAttribute("tid");
      const targetElement = document.getElementById(targetId);
      if (targetElement) smoothScrollToElement(targetElement, 0.3);


      window.userManualNavigation = true;
      setTimeout(() => {
        window.userManualNavigation = false;
      }, 800);
    }

    let cb_t3 = function (e) {

      const targetId = e.currentTarget.getAttribute("tid");
      const targetElement = document.getElementById(targetId);
      if (targetElement) smoothScrollToElement(targetElement, 0.3);


      window.userManualNavigation = true;
      setTimeout(() => {
        window.userManualNavigation = false;
      }, 800);
    }

    let cb_t4 = function (e) {

      const targetId = e.currentTarget.getAttribute("tid");
      const targetElement = document.getElementById(targetId);
      if (targetElement) smoothScrollToElement(targetElement, 0.3);


      window.userManualNavigation = true;
      setTimeout(() => {
        window.userManualNavigation = false;
      }, 800);
    }

    let cb_t5 = function (e) {

      const targetId = e.currentTarget.getAttribute("tid");
      const targetElement = document.getElementById(targetId);
      if (targetElement) smoothScrollToElement(targetElement, 0.3);


      window.userManualNavigation = true;
      setTimeout(() => {
        window.userManualNavigation = false;
      }, 800);
    }


    function initScrollHighlight() {
      // Support both old content structure and new Safety-style structure
      const sections = document.querySelectorAll('#content h1, #content h2, #content h3, #content h4, #content h5, #auto-page-content h1, #auto-page-content h2, #auto-page-content h3, #auto-page-content h4, #auto-page-content h5');
      const menuItems = {
        t1: document.querySelectorAll('#menu .t1'),
        t2: document.querySelectorAll('#menu .t2'),
        t3: document.querySelectorAll('#menu .t3'),
        t4: document.querySelectorAll('#menu .t4'),
        t5: document.querySelectorAll('#menu .t5')
      };

      function updateActiveSection() {
        const scrollTop = window.pageYOffset || document.documentElement.scrollTop;
        const nav = document.querySelector('.my-nav');
        const navHeight = nav ? nav.getBoundingClientRect().height : 0;
        const viewportHeight = window.innerHeight || document.documentElement.clientHeight || 800;
        const dynamicOffset = Math.floor(viewportHeight * 0.3) + navHeight;

        let activeSection = null;
        let activeSubsection = null;
        let activeSubSubsection = null;
        let activeH4 = null;
        let activeH5 = null;
        let closestSection = null;
        let minDistance = Infinity;


        sections.forEach(section => {
          const rect = section.getBoundingClientRect();
          const sectionTop = rect.top + scrollTop;
          const distance = Math.abs(sectionTop - (scrollTop + dynamicOffset));

          if (distance < minDistance) {
            minDistance = distance;
            closestSection = section;
          }



          const targetPosition = scrollTop + dynamicOffset;
          const tolerance = 50; // 50px

          if (Math.abs(sectionTop - targetPosition) <= tolerance) {
            if (section.tagName === 'H1') {
              activeSection = section;
            } else if (section.tagName === 'H2') {
              activeSubsection = section;
            } else if (section.tagName === 'H3') {
              activeSubSubsection = section;
            } else if (section.tagName === 'H4') {
              activeH4 = section;
            } else if (section.tagName === 'H5') {
              activeH5 = section;
            }
          }
        });


        if (!activeSection && !activeSubsection && !activeSubSubsection && !activeH4 && !activeH5 && closestSection) {
          if (closestSection.tagName === 'H1') {
            activeSection = closestSection;
          } else if (closestSection.tagName === 'H2') {
            activeSubsection = closestSection;
          } else if (closestSection.tagName === 'H3') {
            activeSubSubsection = closestSection;
          } else if (closestSection.tagName === 'H4') {
            activeH4 = closestSection;
          } else if (closestSection.tagName === 'H5') {
            activeH5 = closestSection;
          }
        }

        // unfold
        menuItems.t1.forEach(item => {
          item.classList.remove('active', 'show');
          // unfold
        });
        menuItems.t2.forEach(item => item.classList.remove('active', 'show'));
        menuItems.t3.forEach(item => item.classList.remove('active', 'show'));
        menuItems.t4.forEach(item => item.classList.remove('active', 'show'));
        menuItems.t5.forEach(item => item.classList.remove('active', 'show'));


        if (activeSection) {
          const activeT1 = document.querySelector(`#menu .t1[tid="${activeSection.id}"]`);
          if (activeT1) {
            activeT1.classList.add('active', 'show');

            if (!activeT1.classList.contains('unfold')) {

              const nextElement = activeT1.nextElementSibling;
              if (nextElement && nextElement.classList.contains('h2-sec') && nextElement.children.length > 0) {
                activeT1.classList.add('unfold');
              }
            }
          }
        }


        if (activeSubsection) {
          const activeT2 = document.querySelector(`#menu .t2[tid="${activeSubsection.id}"]`);
          if (activeT2) {
            activeT2.classList.add('active', 'show');

            const parentT1 = activeT2.closest('.h2-sec').previousElementSibling;
            if (parentT1 && parentT1.classList.contains('t1')) {
              parentT1.classList.add('active', 'show');

              if (!parentT1.classList.contains('unfold')) {
                parentT1.classList.add('unfold');
              }
            }
          }
        }


        if (activeSubSubsection) {
          const activeT3 = document.querySelector(`#menu .t3[tid="${activeSubSubsection.id}"]`);
          if (activeT3) {
            activeT3.classList.add('active', 'show');
            // (t2t1)
            const parentT2 = activeT3.closest('.h3-sec').previousElementSibling;
            if (parentT2 && parentT2.classList.contains('t2')) {
              parentT2.classList.add('active', 'show');
              // t2
              if (!parentT2.classList.contains('unfold')) {
                const nextElement = parentT2.nextElementSibling;
                if (nextElement && nextElement.classList.contains('h3-sec') && nextElement.children.length > 0) {
                  parentT2.classList.add('unfold');
                }
              }


              const parentT1 = parentT2.closest('.h2-sec').previousElementSibling;
              if (parentT1 && parentT1.classList.contains('t1')) {
                parentT1.classList.add('active', 'show');

                if (!parentT1.classList.contains('unfold')) {
                  parentT1.classList.add('unfold');
                }
              }
            }
          }
        }

        // Handle h4 highlighting
        if (activeH4) {
          const activeT4 = document.querySelector(`#menu .t4[tid="${activeH4.id}"]`);
          if (activeT4) {
            activeT4.classList.add('active', 'show');
            // Activate parent t3
            const parentT3 = activeT4.closest('.h4-sec').previousElementSibling;
            if (parentT3 && parentT3.classList.contains('t3')) {
              parentT3.classList.add('active', 'show');
              // Unfold t3 if needed
              if (!parentT3.classList.contains('unfold')) {
                const nextElement = parentT3.nextElementSibling;
                if (nextElement && nextElement.classList.contains('h4-sec') && nextElement.children.length > 0) {
                  parentT3.classList.add('unfold');
                }
              }

              // Activate parent t2
              const parentT2 = parentT3.closest('.h3-sec').previousElementSibling;
              if (parentT2 && parentT2.classList.contains('t2')) {
                parentT2.classList.add('active', 'show');
                if (!parentT2.classList.contains('unfold')) {
                  parentT2.classList.add('unfold');
                }

                // Activate parent t1
                const parentT1 = parentT2.closest('.h2-sec').previousElementSibling;
                if (parentT1 && parentT1.classList.contains('t1')) {
                  parentT1.classList.add('active', 'show');
                  if (!parentT1.classList.contains('unfold')) {
                    parentT1.classList.add('unfold');
                  }
                }
              }
            }
          }
        }

        // Handle h5 highlighting
        if (activeH5) {
          const activeT5 = document.querySelector(`#menu .t5[tid="${activeH5.id}"]`);
          if (activeT5) {
            activeT5.classList.add('active', 'show');
            // Activate parent t4
            const parentT4 = activeT5.closest('.h5-sec').previousElementSibling;
            if (parentT4 && parentT4.classList.contains('t4')) {
              parentT4.classList.add('active', 'show');
              // Unfold t4 if needed
              if (!parentT4.classList.contains('unfold')) {
                const nextElement = parentT4.nextElementSibling;
                if (nextElement && nextElement.classList.contains('h5-sec') && nextElement.children.length > 0) {
                  parentT4.classList.add('unfold');
                }
              }

              // Activate parent t3
              const parentT3 = parentT4.closest('.h4-sec').previousElementSibling;
              if (parentT3 && parentT3.classList.contains('t3')) {
                parentT3.classList.add('active', 'show');
                if (!parentT3.classList.contains('unfold')) {
                  parentT3.classList.add('unfold');
                }

                // Activate parent t2
                const parentT2 = parentT3.closest('.h3-sec').previousElementSibling;
                if (parentT2 && parentT2.classList.contains('t2')) {
                  parentT2.classList.add('active', 'show');
                  if (!parentT2.classList.contains('unfold')) {
                    parentT2.classList.add('unfold');
                  }

                  // Activate parent t1
                  const parentT1 = parentT2.closest('.h2-sec').previousElementSibling;
                  if (parentT1 && parentT1.classList.contains('t1')) {
                    parentT1.classList.add('active', 'show');
                    if (!parentT1.classList.contains('unfold')) {
                      parentT1.classList.add('unfold');
                    }
                  }
                }
              }
            }
          }
        }
      }


      let scrollTimeout;
      window.addEventListener('scroll', () => {

        if (window.userManualNavigation) {
          return;
        }
        clearTimeout(scrollTimeout);
        scrollTimeout = setTimeout(updateActiveSection, 10);
      });


      setTimeout(updateActiveSection, 100);


      console.log('Scroll highlight initialized with', sections.length, 'sections');
    }

    // Initialize sidebar functionality
    if (document.getElementById("menu")) {
      stickyMenu();
      initScrollHighlight();
      bind("#menu .t1", "click", cb_t1);
      bind("#menu .t2", "click", cb_t2);
      bind("#menu .t3", "click", cb_t3);
      bind("#menu .t4", "click", cb_t4);
      bind("#menu .t5", "click", cb_t5);
    }

    // Safety-style navigation generation for pages with auto-page-content
    function initSafetyStyleNavigation() {
      // Skip when a page defines its own converter (e.g., Collaboration page)
      if (document.getElementById('auto-collaboration-content')) return;
      const contentRoot = document.getElementById('auto-page-content');
      if (!contentRoot) return;

      function slugify(text) {
        return text.toLowerCase()
          .replace(/[^a-z0-9\u4e00-\u9fa5\s\.-]/g, '')
          .trim()
          .replace(/\s+/g, '-');
      }

      // Promote <p><strong>Title</strong></p> to <h1>/<h2>
      const paragraphs = Array.from(contentRoot.querySelectorAll('p'));
      const promoted = [];
      paragraphs.forEach(p => {
        const strong = p.querySelector('strong');
        if (!strong) return;
        const text = strong.textContent.trim();
        if (!text) return;

        const isThirdLevel = /^\d+\.\d+\.\d+/.test(text); // 3.2.1 format
        const isSecondLevel = /^\d+\.\d+/.test(text) && !isThirdLevel; // 3.2 format but not 3.2.1
        const isTopNumbered = /^\d+\./.test(text) && !isSecondLevel && !isThirdLevel; // 3. format
        const isOverview = /^overview$/i.test(text.trim());
        const isSafety = /^safety$/i.test(text.trim()); // Handle the first "Safety" title
        const level = isThirdLevel ? 'H3' : (isSecondLevel ? 'H2' : (isTopNumbered || isOverview || isSafety ? 'H1' : null));
        if (!level) return;

        // Convert "Safety" to "Overview" for consistency
        const finalText = isSafety ? 'Overview' : text;
        const id = slugify(finalText);
        const h = document.createElement(level);
        h.textContent = finalText.replace(/\s+$/, '');
        h.id = id;

        // Replace paragraph with heading
        p.parentNode.replaceChild(h, p);
        promoted.push(h);
      });

      // Build sidebar menu from generated headings
      const menu = document.getElementById('menu');
      const menubg = document.querySelector('.menubg');
      if (!menu || !menubg) return;
      // Clear existing items
      menu.innerHTML = '';

      // Group headings with proper hierarchy (h1 > h2 > h3 > h4 > h5)
      const headings = Array.from(contentRoot.querySelectorAll('h1, h2, h3, h4, h5'));
      let currentH2Container = null;
      let currentH3Container = null;
      let currentH4Container = null;
      let currentH5Container = null;

      // First pass: collect all headings and determine which ones have children
      const headingInfo = headings.map((node, index) => {
        const level = parseInt(node.tagName.charAt(1));
        const nextHeading = headings[index + 1];
        const hasChildren = nextHeading && parseInt(nextHeading.tagName.charAt(1)) > level;

        return {
          node,
          level,
          hasChildren,
          id: node.id,
          text: node.textContent
        };
      });

      headingInfo.forEach((info, index) => {
        if (info.level === 1) {
          const t1 = document.createElement('div');
          t1.className = 't1';
          t1.setAttribute('tid', info.id);

          // Create text span
          const textSpan = document.createElement('span');
          textSpan.className = 'heading-text';
          textSpan.textContent = info.text;
          t1.appendChild(textSpan);

          // Add expand icon if has children
          if (info.hasChildren) {
            const icon = document.createElement('span');
            icon.className = 'expand-icon';
            icon.innerHTML = '‚ñ∂';
            t1.appendChild(icon);
          }

          menu.appendChild(t1);

          const h2sec = document.createElement('div');
          h2sec.className = 'h2-sec';
          menu.appendChild(h2sec);

          currentH2Container = h2sec;
          currentH3Container = null; // Reset h3 container when new h1 starts
          currentH4Container = null; // Reset h4 container when new h1 starts
          currentH5Container = null; // Reset h5 container when new h1 starts
        } else if (info.level === 2) {
          if (!currentH2Container) {
            currentH2Container = document.createElement('div');
            currentH2Container.className = 'h2-sec';
            menu.appendChild(currentH2Container);
          }
          const t2 = document.createElement('div');
          t2.className = 't2';
          t2.setAttribute('tid', info.id);

          // Create text span
          const textSpan = document.createElement('span');
          textSpan.className = 'heading-text';
          textSpan.textContent = info.text;
          t2.appendChild(textSpan);

          // Add expand icon if has children
          if (info.hasChildren) {
            const icon = document.createElement('span');
            icon.className = 'expand-icon';
            icon.innerHTML = '‚ñ∂';
            t2.appendChild(icon);
          }

          currentH2Container.appendChild(t2);

          // Create container for h3 items under this h2
          const h3sec = document.createElement('div');
          h3sec.className = 'h3-sec';
          currentH2Container.appendChild(h3sec);
          currentH3Container = h3sec;
          currentH4Container = null; // Reset h4 container when new h2 starts
          currentH5Container = null; // Reset h5 container when new h2 starts
        } else if (info.level === 3) {
          if (!currentH3Container) {
            // If no h2 container exists, create one
            if (!currentH2Container) {
              currentH2Container = document.createElement('div');
              currentH2Container.className = 'h2-sec';
              menu.appendChild(currentH2Container);
            }
            currentH3Container = document.createElement('div');
            currentH3Container.className = 'h3-sec';
            currentH2Container.appendChild(currentH3Container);
          }
          const t3 = document.createElement('div');
          t3.className = 't3';
          t3.setAttribute('tid', info.id);

          // Create text span
          const textSpan = document.createElement('span');
          textSpan.className = 'heading-text';
          textSpan.textContent = info.text;
          t3.appendChild(textSpan);

          // Add expand icon if has children
          if (info.hasChildren) {
            const icon = document.createElement('span');
            icon.className = 'expand-icon';
            icon.innerHTML = '‚ñ∂';
            t3.appendChild(icon);
          }

          currentH3Container.appendChild(t3);

          // Create container for h4 items under this h3
          const h4sec = document.createElement('div');
          h4sec.className = 'h4-sec';
          currentH3Container.appendChild(h4sec);
          currentH4Container = h4sec;
          currentH5Container = null; // Reset h5 container when new h3 starts
        } else if (info.level === 4) {
          if (!currentH4Container) {
            // If no h3 container exists, create one
            if (!currentH3Container) {
              if (!currentH2Container) {
                currentH2Container = document.createElement('div');
                currentH2Container.className = 'h2-sec';
                menu.appendChild(currentH2Container);
              }
              currentH3Container = document.createElement('div');
              currentH3Container.className = 'h3-sec';
              currentH2Container.appendChild(currentH3Container);
            }
            currentH4Container = document.createElement('div');
            currentH4Container.className = 'h4-sec';
            currentH3Container.appendChild(currentH4Container);
          }
          const t4 = document.createElement('div');
          t4.className = 't4';
          t4.setAttribute('tid', info.id);

          // Create text span
          const textSpan = document.createElement('span');
          textSpan.className = 'heading-text';
          textSpan.textContent = info.text;
          t4.appendChild(textSpan);

          // Add expand icon if has children
          if (info.hasChildren) {
            const icon = document.createElement('span');
            icon.className = 'expand-icon';
            icon.innerHTML = '‚ñ∂';
            t4.appendChild(icon);
          }

          currentH4Container.appendChild(t4);

          // Create container for h5 items under this h4
          const h5sec = document.createElement('div');
          h5sec.className = 'h5-sec';
          currentH4Container.appendChild(h5sec);
          currentH5Container = h5sec;
        } else if (info.level === 5) {
          if (!currentH5Container) {
            // If no h4 container exists, create one
            if (!currentH4Container) {
              if (!currentH3Container) {
                if (!currentH2Container) {
                  currentH2Container = document.createElement('div');
                  currentH2Container.className = 'h2-sec';
                  menu.appendChild(currentH2Container);
                }
                currentH3Container = document.createElement('div');
                currentH3Container.className = 'h3-sec';
                currentH2Container.appendChild(currentH3Container);
              }
              currentH4Container = document.createElement('div');
              currentH4Container.className = 'h4-sec';
              currentH3Container.appendChild(currentH4Container);
            }
            currentH5Container = document.createElement('div');
            currentH5Container.className = 'h5-sec';
            currentH4Container.appendChild(currentH5Container);
          }
          const t5 = document.createElement('div');
          t5.className = 't5';
          t5.setAttribute('tid', info.id);
          t5.textContent = info.text;
          currentH5Container.appendChild(t5);
        }
      });

      // Re-bind sidebar interactions
      if (typeof window !== 'undefined') {
        const clickBind = function (selector, event, cb) {
          document.querySelectorAll(selector).forEach(el => el.addEventListener(event, cb));
        };

        clickBind('#menu .t1', 'click', cb_t1);
        clickBind('#menu .t2', 'click', cb_t2);
        clickBind('#menu .t3', 'click', cb_t3);
        clickBind('#menu .t4', 'click', cb_t4);
        clickBind('#menu .t5', 'click', cb_t5);
      }
    }

    // Initialize Safety-style navigation if applicable
    document.addEventListener('DOMContentLoaded', function () {
      initSafetyStyleNavigation();
    });

    // ScrollReveal functionality for sidebar
    window.addEventListener('load', function () {
      if (typeof ScrollReveal !== 'undefined') {
        ScrollReveal().reveal('.lr', {
          reset: true,
          origin: 'left',
          distance: '200px',
          duration: 1000,
          easing: 'ease',
          opacity: 0
        });
        ScrollReveal().reveal('.rl', {
          reset: true,
          origin: 'right',
          distance: '200px',
          duration: 1000,
          easing: 'ease',
          opacity: 0
        });


      }
    });
  </script>

  <script src="static/pagefind/pagefind-ui.js"></script>
  <script>
    document.addEventListener('DOMContentLoaded', function () {
      const el = document.querySelector('#search');
      if (!el) return;

      // Calculate Pagefind directory (avoid frozen 404 from directory URL)
      const PF_UI_SRC = "static/pagefind/pagefind-ui.js";
      const PF_BUNDLE = PF_UI_SRC.replace(/\/pagefind-ui\.js$/, '');

      if (window.PagefindUI) {
        // Normal: render search UI with Pagefind
        new PagefindUI({
          element: '#search',
          bundlePath: PF_BUNDLE,
          showSubResults: true,
          placeholder: 'Search the wiki'
        });
      } else {

        el.innerHTML = '<input type="search" class="pagefind-ui__search-input" placeholder="Search (index not built yet)">';
      }
    });
  </script>


  <!-- ECharts -->
  <script src="static/vendor/echarts/echarts.min.js"></script>

  
<style>
  /* Remove all pseudo-elements globally */
  [id*="content"] *::before,
  [id*="content"] *::after,
  .pagecontent *::before,
  .pagecontent *::after {
    content: none !important;
    display: none !important;
  }

  /* Future-only: reduce initial top gap so content shows immediately */
  .pagecontainer { margin-top: 4vh; }
  .pagecontent { transform: none; margin-top: 0; }
  
  /* Unified title styling */
  .title2 { 
    margin-bottom: 60px !important;
    margin-left: -100px !important;
  }
  .title2 > span {
    font-size: 8.5vw !important;
  }

  /* Navbar styles managed by global navbar.css, remove page-specific overrides here */

  /* Project: set background image for Future */
  .safety-bg-image {
    background: url("https://static.igem.wiki/teams/5913/picture/project-background.webp") !important;
    background-size: cover !important;
    background-position: center center !important;
    background-repeat: no-repeat !important;
  }

  /* Align Future background with fixed 250px sidebar on desktop */
  @media (min-width: 921px) {
    .future-bg-image {
      left: 250px;
      width: calc(100% - 250px);
    }
    
    /* Override sidebar position to move it to bottom */
    .main .menubg {
      top: 78px !important;
      height: calc(100vh - 78px) !important;
    }
  }

</style>
<script>
  // Convert bold paragraph titles to semantic headings and build sidebar
  function initFuturePageScript() {
    const contentRoot = document.getElementById('auto-future-content');
    if (!contentRoot) return;

    function slugify(text) {
      return text.toLowerCase()
        .replace(/[^a-z0-9\u4e00-\u9fa5\s\.-]/g, '')
        .trim()
        .replace(/\s+/g, '-');
    }

    // Promote <p><strong>Title</strong></p> only for specified top-level titles
    const paragraphs = Array.from(contentRoot.querySelectorAll('p'));
    const promoted = [];
    paragraphs.forEach(p => {
      const strong = p.querySelector('strong');
      if (!strong) return;
      const text = strong.textContent.trim();
      if (!text) return;

      // Only these four appear in the left sidebar
      const topTitles = [
        'part1: biotechnological mass production',
        'part 2: expansion of implementation scenarios',
        'part 3: stability enhancement',
        'references'
      ];
      const topTitleSet = new Set(topTitles);
      const isTopTitle = topTitleSet.has(text.toLowerCase());
      if (!isTopTitle) return;

      // Ensure unique id
      const baseId = slugify(text);
      let id = baseId;
      let dup = 2;
      while (document.getElementById(id)) {
        id = baseId + '-' + dup++;
      }

      const h = document.createElement('h1');
      h.textContent = text.replace(/\s+$/,'');
      h.id = id;

      // Replace paragraph with heading
      p.parentNode.replaceChild(h, p);
      promoted.push(h);
    });

    // Also recognize manually written H1s that match the four titles
    const existingH1s = Array.from(contentRoot.querySelectorAll('h1'));
    existingH1s.forEach(h => {
      const text = (h.textContent || '').trim();
      if (!text) return;
      const lower = text.toLowerCase();
      const topTitles = [
        'part1: biotechnological mass production',
        'part 2: expansion of implementation scenarios',
        'part 3: stability enhancement',
        'references'
      ];
      if (!topTitles.includes(lower)) return;

      // Ensure unique id for manual H1
      const baseId = slugify(text);
      let id = h.id && h.id.trim() ? h.id : baseId;
      let dup = 2;
      while (document.getElementById(id) && document.getElementById(id) !== h) {
        id = baseId + '-' + dup++;
      }
      h.id = id;
      promoted.push(h);
    });

    // Ensure ONLY the specified titles are top-level (H1)
    const promotedIds = new Set(promoted.map(h => h.id));
    // Demote any other H1s to H2 so they don't appear as top-level in the sidebar
    Array.from(contentRoot.querySelectorAll('h1')).forEach(h => {
      if (!promotedIds.has(h.id)) {
        const h2 = document.createElement('h2');
        h2.id = h.id || slugify(h.textContent || '');
        h2.textContent = h.textContent;
        h.parentNode.replaceChild(h2, h);
      }
    });

    // Build sidebar menu from generated headings
    const menu = document.getElementById('menu');
    const menubg = document.querySelector('.menubg');
    console.log('Menu element:', menu);
    console.log('Menubg element:', menubg);
    console.log('Promoted headings:', promoted.length);
    if (!menu || !menubg) {
      console.error('Menu or menubg not found!');
      return;
    }
    // Clear existing items
    menu.innerHTML = '';

    // Group headings (filter H1s to ONLY our five top titles)
    const allHeadings = Array.from(contentRoot.querySelectorAll('h1, h2, h3'));
    const headings = allHeadings.filter(node => node.tagName !== 'H1' || promotedIds.has(node.id));
    console.log('Found headings:', headings.length, headings.map(h => h.tagName + ': ' + h.textContent));

    // Fallback: if no headings detected, derive sidebar directly from the four bold paragraphs
    if (headings.length === 0 && promoted.length === 0) {
      const topTitles = [
        'part1: biotechnological mass production',
        'part 2: expansion of implementation scenarios',
        'part 3: stability enhancement',
        'references'
      ];
      const topSet = new Set(topTitles);
      const paras = Array.from(contentRoot.querySelectorAll('p'));
      paras.forEach(p => {
        const strong = p.querySelector('strong');
        if (!strong) return;
        const text = (strong.textContent || '').trim();
        if (!text) return;
        if (!topSet.has(text.toLowerCase())) return;
        // Ensure an id on the paragraph (can scroll to any element)
        const baseId = slugify(text);
        let id = p.id && p.id.trim() ? p.id : baseId;
        let dup = 2;
        while (document.getElementById(id) && document.getElementById(id) !== p) {
          id = baseId + '-' + dup++;
        }
        p.id = id;
        const t1 = document.createElement('div');
        t1.className = 't1';
        t1.setAttribute('tid', id);
        const textSpan = document.createElement('span');
        textSpan.className = 'heading-text';
        textSpan.textContent = text;
        t1.appendChild(textSpan);
        menu.appendChild(t1);
        const h2sec = document.createElement('div');
        h2sec.className = 'h2-sec';
        menu.appendChild(h2sec);
      });
      // Stop further menu building; handlers from sidebar-common.js will bind globally
      return;
    }
    let currentH2Container = null;
    let currentH3Container = null;
    
    // First pass: collect all headings and determine which ones have children
    const headingInfo = headings.map((node, index) => {
      const level = parseInt(node.tagName.charAt(1));
      const nextHeading = headings[index + 1];
      const hasChildren = nextHeading && parseInt(nextHeading.tagName.charAt(1)) > level;
      
      return {
        node,
        level,
        hasChildren,
        id: node.id,
        text: node.textContent
      };
    });

    headingInfo.forEach((info, index) => {
      if (info.level === 1) {
        const t1 = document.createElement('div');
        t1.className = 't1';
        t1.setAttribute('tid', info.id);
        
        // Create text span
        const textSpan = document.createElement('span');
        textSpan.className = 'heading-text';
        textSpan.textContent = info.text;
        t1.appendChild(textSpan);
        
        // Add expand icon if has children
        if (info.hasChildren) {
          const icon = document.createElement('span');
          icon.className = 'expand-icon';
          icon.innerHTML = '&#9654;';
          t1.appendChild(icon);
        }
        
        menu.appendChild(t1);

        const h2sec = document.createElement('div');
        h2sec.className = 'h2-sec';
        menu.appendChild(h2sec);

        currentH2Container = h2sec;
        currentH3Container = null; // Reset h3 container when new h1 starts
      } else if (info.level === 2) {
        if (!currentH2Container) {
          currentH2Container = document.createElement('div');
          currentH2Container.className = 'h2-sec';
          menu.appendChild(currentH2Container);
        }
        const t2 = document.createElement('div');
        t2.className = 't2';
        t2.setAttribute('tid', info.id);
        
        // Create text span
        const textSpan = document.createElement('span');
        textSpan.className = 'heading-text';
        textSpan.textContent = info.text;
        t2.appendChild(textSpan);
        
        // Add expand icon if has children
        if (info.hasChildren) {
          const icon = document.createElement('span');
          icon.className = 'expand-icon';
          icon.innerHTML = '&#9654;';
          t2.appendChild(icon);
        }
        
        currentH2Container.appendChild(t2);
        
        // Create container for h3 items under this h2
        const h3sec = document.createElement('div');
        h3sec.className = 'h3-sec';
        currentH2Container.appendChild(h3sec);
        currentH3Container = h3sec;
      } else if (info.level === 3) {
        if (!currentH3Container) {
          // If no h2 container exists, create one
          if (!currentH2Container) {
            currentH2Container = document.createElement('div');
            currentH2Container.className = 'h2-sec';
            menu.appendChild(currentH2Container);
          }
          currentH3Container = document.createElement('div');
          currentH3Container.className = 'h3-sec';
          currentH2Container.appendChild(currentH3Container);
        }
        const t3 = document.createElement('div');
        t3.className = 't3';
        t3.setAttribute('tid', info.id);
        t3.textContent = info.text;
        currentH3Container.appendChild(t3);
      }
    });

    // Re-bind sidebar interactions provided in layout
    if (typeof window !== 'undefined') {
      const clickBind = function (selector, event, cb) {
        document.querySelectorAll(selector).forEach(el => el.addEventListener(event, cb));
      };

      const cb_t1 = function (e) {
        // Get the actual t1 element (in case user clicked on text span or icon)
        const t1Element = e.target.closest('.t1');
        if (!t1Element) return;
        
        const isCurrentlyUnfolded = t1Element.classList.contains('unfold');
        
        // Remove unfold class from all t1 elements and reset their icons
        document.querySelectorAll('#menu .t1').forEach(item => {
          item.classList.remove('unfold');
          const icon = item.querySelector('.expand-icon');
          if (icon) icon.innerHTML = '&#9654;';
        });
        
        // Also reset all t2 elements when collapsing t1
        document.querySelectorAll('#menu .t2').forEach(item => {
          item.classList.remove('unfold');
          const icon = item.querySelector('.expand-icon');
          if (icon) icon.innerHTML = '&#9654;';
        });
        
        // Toggle: if it was unfolded, keep it folded; if it was folded, unfold it
        if (!isCurrentlyUnfolded) {
          t1Element.classList.add('unfold');
          const icon = t1Element.querySelector('.expand-icon');
          if (icon) icon.innerHTML = '&#9660;';
        }
        
        const targetId = t1Element.getAttribute('tid');
        const el = document.getElementById(targetId);
        if (el) {
          // Calculate scroll to 70% position of section
          const nav = document.querySelector('.my-nav');
          const navHeight = nav ? nav.getBoundingClientRect().height : 0;
          const viewportHeight = window.innerHeight || document.documentElement.clientHeight || 800;
          const dynamicOffset = Math.floor(viewportHeight * 0.3) + navHeight;
          
          const targetRect = el.getBoundingClientRect();
          const targetTop = targetRect.top + window.pageYOffset;
          const targetHeight = targetRect.height;
          
          // Scroll to 70% position of section so highlight logic activates immediately
          const target70PercentPoint = targetTop + (targetHeight * 0.7);
          const scrollToPosition = Math.max(0, target70PercentPoint - dynamicOffset);
          
          window.scrollTo({ 
            top: scrollToPosition, 
            behavior: 'smooth' 
          });
        }
        window.userManualNavigation = true;
        // Immediately update highlight state
        setTimeout(() => {
          window.updateActiveSection();
          window.userManualNavigation = false;
        }, 100);
      };

      const cb_t2 = function (e) {
        // Get the actual t2 element (in case user clicked on text span or icon)
        const t2Element = e.target.closest('.t2');
        if (!t2Element) return;
        
        // Check if this t2 has an expand icon (meaning it has children)
        const icon = t2Element.querySelector('.expand-icon');
        if (icon) {
          // Toggle the h3-sec visibility using CSS classes
          const h3Container = t2Element.nextElementSibling;
          if (h3Container && h3Container.classList.contains('h3-sec')) {
            const isCurrentlyExpanded = t2Element.classList.contains('unfold');
            if (isCurrentlyExpanded) {
              t2Element.classList.remove('unfold');
              icon.innerHTML = '&#9654;';
            } else {
              t2Element.classList.add('unfold');
              icon.innerHTML = '&#9660;';
            }
          }
        }
        
        const targetId = t2Element.getAttribute('tid');
        const el = document.getElementById(targetId);
        if (el) {
          // Calculate scroll to 70% position of section
          const nav = document.querySelector('.my-nav');
          const navHeight = nav ? nav.getBoundingClientRect().height : 0;
          const viewportHeight = window.innerHeight || document.documentElement.clientHeight || 800;
          const dynamicOffset = Math.floor(viewportHeight * 0.3) + navHeight;
          
          const targetRect = el.getBoundingClientRect();
          const targetTop = targetRect.top + window.pageYOffset;
          const targetHeight = targetRect.height;
          
          // Scroll to 70% position of section so highlight logic activates immediately
          const target70PercentPoint = targetTop + (targetHeight * 0.7);
          const scrollToPosition = Math.max(0, target70PercentPoint - dynamicOffset);
          
          window.scrollTo({ 
            top: scrollToPosition, 
            behavior: 'smooth' 
          });
        }
        window.userManualNavigation = true;
        window.navigationClicked = true; // Set navigation click flag
        // Immediately update highlight state
        setTimeout(() => {
          window.updateActiveSection();
          window.userManualNavigation = false;
        }, 100);
      };

      const cb_t3 = function (e) {
        const targetId = e.target.getAttribute('tid');
        const el = document.getElementById(targetId);
        if (el) {
          // Calculate scroll to 70% position of section
          const nav = document.querySelector('.my-nav');
          const navHeight = nav ? nav.getBoundingClientRect().height : 0;
          const viewportHeight = window.innerHeight || document.documentElement.clientHeight || 800;
          const dynamicOffset = Math.floor(viewportHeight * 0.3) + navHeight;
          
          const targetRect = el.getBoundingClientRect();
          const targetTop = targetRect.top + window.pageYOffset;
          const targetHeight = targetRect.height;
          
          // Scroll to 70% position of section so highlight logic activates immediately
          const target70PercentPoint = targetTop + (targetHeight * 0.7);
          const scrollToPosition = Math.max(0, target70PercentPoint - dynamicOffset);
          
          window.scrollTo({ 
            top: scrollToPosition, 
            behavior: 'smooth' 
          });
        }
        window.userManualNavigation = true;
        window.navigationClicked = true; // Set navigation click flag
        // Immediately update highlight state
        setTimeout(() => {
          window.updateActiveSection();
          window.userManualNavigation = false;
        }, 100);
      };

      // Enhanced scroll highlighting for future page (supports h1, h2, h3)
      const sections = document.querySelectorAll('#auto-future-content h1, #auto-future-content h2, #auto-future-content h3');
      const menuItems = {
        t1: document.querySelectorAll('#menu .t1'),
        t2: document.querySelectorAll('#menu .t2'),
        t3: document.querySelectorAll('#menu .t3')
      };
      
      
      // Global updateActiveSection function for future page
      window.updateActiveSection = function() {
          // Skip if user is manually navigating or has clicked navigation
          if (window.userManualNavigation || window.navigationClicked) {
            return;
          }
          
          const scrollTop = window.pageYOffset || document.documentElement.scrollTop;
          const nav = document.querySelector('.my-nav');
          const navHeight = nav ? nav.getBoundingClientRect().height : 0;
          const viewportHeight = window.innerHeight || document.documentElement.clientHeight || 800;
          const dynamicOffset = Math.floor(viewportHeight * 0.3) + navHeight;
          
          const currentViewPosition = scrollTop + dynamicOffset;
          
          // New logic: find the section closest to current viewport position (handled by hierarchy)
          let activeSection = null;
          let activeSubsection = null;
          let activeSubSubsection = null;
          
          let minDistanceH1 = Infinity;
          let minDistanceH2 = Infinity;
          let minDistanceH3 = Infinity;
          
          sections.forEach(section => {
            const rect = section.getBoundingClientRect();
            const sectionTop = rect.top + scrollTop;
            const sectionCenter = sectionTop + (rect.height * 0.5); 
            // Calculate distance from current viewport position to section center
            const distanceToCenter = Math.abs(sectionCenter - currentViewPosition);
            
          // Check if section is before current viewport position
          if (sectionTop <= currentViewPosition) {
            if (section.tagName === 'H1' && distanceToCenter < minDistanceH1) {
              minDistanceH1 = distanceToCenter;
              activeSection = section;
            } else if (section.tagName === 'H2' && distanceToCenter < minDistanceH2) {
              minDistanceH2 = distanceToCenter;
              activeSubsection = section;
            } else if (section.tagName === 'H3' && distanceToCenter < minDistanceH3) {
              minDistanceH3 = distanceToCenter;
              activeSubSubsection = section;
            }
          }
          });
          
          // Validate H2 and H3 belong to H1
          if (activeSection && activeSubsection) {
            // Check if H2 belongs to H1
            const h1Id = activeSection.id;
            const h2Id = activeSubsection.id;
            // If H2's ID prefix doesn't match H1, reset H2
            if (!h2Id.startsWith(h1Id.split('.')[0] + '.')) {
              activeSubsection = null;
              minDistanceH2 = Infinity;
            }
          }
          
          if (activeSubsection && activeSubSubsection) {
            // Check if H3 belongs to H2
            const h2Id = activeSubsection.id;
            const h3Id = activeSubSubsection.id;
            
            // Extract number prefixes: "3.2.4-title" -> "3.2"
            const h2NumPrefix = h2Id.match(/^(\d+\.\d+)/);
            const h3NumPrefix = h3Id.match(/^(\d+\.\d+\.\d+)/);
            
            // Validate H3 belongs to H2
            if (h2NumPrefix && h3NumPrefix) {
              const h2Num = h2NumPrefix[1]; // "3.2"
              const h3ParentNum = h3NumPrefix[1].split('.').slice(0, 2).join('.'); // "3.2.4" -> "3.2"
              
              if (h3ParentNum !== h2Num) {
                activeSubSubsection = null;
                minDistanceH3 = Infinity;
              }
            } else {
              // No number prefix, reset H3
              activeSubSubsection = null;
              minDistanceH3 = Infinity;
            }
          } else if (!activeSubsection && activeSubSubsection) {
            // If H2 is missing but H3 exists, reset H3
            activeSubSubsection = null;
            minDistanceH3 = Infinity;
          }
          
          
          if (activeSection) {
            console.log('Active H1:', activeSection.textContent.trim(), 'ID:', activeSection.id);
          }
          if (activeSubsection) {
            console.log('Active H2:', activeSubsection.textContent.trim(), 'ID:', activeSubsection.id);
          }
          if (activeSubSubsection) {
            console.log('Active H3:', activeSubSubsection.textContent.trim(), 'ID:', activeSubSubsection.id);
          }
          
          console.log('Current scroll position:', currentViewPosition, 'Distances:', {
            H1: minDistanceH1,
            H2: minDistanceH2,
            H3: minDistanceH3
          });
          
          
          // Clear all active states and collapse all sections
          menuItems.t1.forEach(item => {
            item.classList.remove('active', 'show');
            // Reset H1 expand state
            item.classList.remove('unfold');
            const icon = item.querySelector('.expand-icon');
            if (icon) icon.innerHTML = '&#9654;';
          });
          menuItems.t2.forEach(item => {
            item.classList.remove('active', 'show');
            // Reset H2 expand state
            item.classList.remove('unfold');
            const icon = item.querySelector('.expand-icon');
            if (icon) icon.innerHTML = '&#9654;';
          });
          menuItems.t3.forEach(item => item.classList.remove('active', 'show'));
          
          // Apply active state: H3 > H2 > H1 priority
          
          if (activeSubSubsection) {
            // Activate H3 and expand its parents
            const activeT3 = document.querySelector(`#menu .t3[tid="${activeSubSubsection.id}"]`);
            if (activeT3) {
              activeT3.classList.add('active', 'show');
              
              // Find and expand H2 and H1 parents
              const parentT2 = activeT3.closest('.h3-sec').previousElementSibling;
              if (parentT2 && parentT2.classList.contains('t2')) {
                parentT2.classList.add('unfold');
                const icon = parentT2.querySelector('.expand-icon');
                if (icon) icon.innerHTML = '&#9660;';
                
                const parentT1 = parentT2.closest('.h2-sec').previousElementSibling;
                if (parentT1 && parentT1.classList.contains('t1')) {
                  parentT1.classList.add('unfold');
                  const icon = parentT1.querySelector('.expand-icon');
                  if (icon) icon.innerHTML = '&#9660;';
                }
              }
            }
          } else if (activeSubsection) {
            // No H3, activate H2 and expand its parent
            const activeT2 = document.querySelector(`#menu .t2[tid="${activeSubsection.id}"]`);
            if (activeT2) {
              activeT2.classList.add('active', 'show');
              
              // If H2 has H3 children, expand it
              if (activeT2.nextElementSibling && activeT2.nextElementSibling.classList.contains('h3-sec') && activeT2.nextElementSibling.children.length > 0) {
                activeT2.classList.add('unfold');
                const icon = activeT2.querySelector('.expand-icon');
                if (icon) icon.innerHTML = '&#9660;';
              }
              
              // Find and expand H1 parent
              const parentT1 = activeT2.closest('.h2-sec').previousElementSibling;
              if (parentT1 && parentT1.classList.contains('t1')) {
                parentT1.classList.add('unfold');
                const icon = parentT1.querySelector('.expand-icon');
                if (icon) icon.innerHTML = '&#9660;';
              }
            }
          } else if (activeSection) {
            // No H2 or H3, activate H1
            const activeT1 = document.querySelector(`#menu .t1[tid="${activeSection.id}"]`);
            if (activeT1) {
              activeT1.classList.add('active', 'show');
              
              // If H1 has H2 children, expand it
              if (activeT1.nextElementSibling && activeT1.nextElementSibling.classList.contains('h2-sec') && activeT1.nextElementSibling.children.length > 0) {
                activeT1.classList.add('unfold');
                const icon = activeT1.querySelector('.expand-icon');
                if (icon) icon.innerHTML = '&#9660;';
              }
            }
          }
        }
      
      // Initialize future-specific scroll highlighting
      function initFutureScrollHighlight() {
        // Listen for scroll events with throttling
        let scrollTimeout;
        window.addEventListener('scroll', () => {
          // Reset navigation flag after scroll
          if (window.navigationClicked) {
            window.navigationClicked = false;
          }
          clearTimeout(scrollTimeout);
          scrollTimeout = setTimeout(window.updateActiveSection, 10);
        });
        
        // Initial update
        setTimeout(window.updateActiveSection, 100);
        
        console.log('Future scroll highlight initialized with', sections.length, 'sections');
      }
      
      initFutureScrollHighlight();
      
      clickBind('#menu .t1', 'click', cb_t1);
      clickBind('#menu .t2', 'click', cb_t2);
      clickBind('#menu .t3', 'click', cb_t3);
    }
  }

  // Execute immediately if DOM is already loaded, otherwise wait for DOMContentLoaded
  if (document.readyState === 'loading') {
    document.addEventListener('DOMContentLoaded', initFuturePageScript);
  } else {
    initFuturePageScript();
  }
</script>
<script>
  // Additional functionality for Future page
  (function() {
    var contentRoot = document.getElementById('auto-future-content');
    if (!contentRoot) return;

    function textOf(node) {
      return (node && node.textContent || '').trim();
    }

    // Hide Table of Contents block if present
    try {
      var allNodes = contentRoot.querySelectorAll('*');
      for (var z = 0; z < allNodes.length; z++) {
        var node = allNodes[z];
        var t = textOf(node).toLowerCase();
        if (!t) continue;
        if (t.indexOf('table of contents') !== -1) {
          // try to hide its nearest block that also contains a UL
          var container = node;
          for (var up = 0; up < 5 && container; up++) {
            if (container.querySelector && container.querySelector('ul')) break;
            container = container.parentElement;
          }
          if (container && container !== contentRoot) {
            container.style.display = 'none';
          } else {
            node.style.display = 'none';
            var next = node.nextElementSibling;
            if (next && next.tagName === 'UL') next.style.display = 'none';
          }
          break;
        }
      }
    } catch (e) {}


    // Enhanced typography: Auto-apply styling classes
    try {
      var paragraphs = contentRoot.querySelectorAll('p');
      paragraphs.forEach(function(p) {
        var text = p.textContent.toLowerCase();
        
        // Apply info styles for key sections
        if (text.includes('design criterion') || text.includes('industrial flow') || text.includes('production costs')) {
          p.classList.add('future-highlight');
        }
        
        // Apply emphasis for important technical terms
        if (text.includes('dna origami') || text.includes('crispr') || text.includes('blood-brain barrier')) {
          p.classList.add('future-technical');
        }
        
        // Handle image groups - if paragraph contains multiple images, wrap them
        var images = p.querySelectorAll('img');
        if (images.length > 1) {
          // Create wrapper for multiple images
          var wrapper = document.createElement('div');
          wrapper.className = 'image-group';
          
          // Move all images to the wrapper
          images.forEach(function(img) {
            wrapper.appendChild(img.cloneNode(true));
          });
          
          // Clear the paragraph and add the wrapper
          p.innerHTML = '';
          p.appendChild(wrapper);
        }
      });

      // Enhanced image loading with fade-in effect
      var images = contentRoot.querySelectorAll('img');
      images.forEach(function(img) {
        if (img.complete) {
          img.style.opacity = '1';
        } else {
          img.addEventListener('load', function() {
            this.style.opacity = '1';
          });
        }
      });

      // Add smooth scroll behavior for better UX
      var links = contentRoot.querySelectorAll('a[href^="#"]');
      links.forEach(function(link) {
        link.addEventListener('click', function(e) {
          var target = document.querySelector(this.getAttribute('href'));
          if (target) {
            e.preventDefault();
            target.scrollIntoView({ behavior: 'smooth', block: 'start' });
          }
        });
      });

    } catch (e) {
      console.log('Enhanced typography features failed to load:', e);
    }
  })();
</script>



  <!-- Bootstrap Bundle -->
  <script src="static/bootstrap.bundle.min.js"></script>
</body>

</html>